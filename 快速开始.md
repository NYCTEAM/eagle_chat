# ğŸš€ Eagle Chat å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸ“¦ æ‚¨å·²è·å¾—çš„æ–‡ä»¶

```
EAGLE_CHAT/
â”œâ”€â”€ deploy-eagle-chat.sh    # â­ ä¸€é”®éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ README.md               # å®Œæ•´æ–‡æ¡£
â”œâ”€â”€ DEPLOY.md               # éƒ¨ç½²è¯´æ˜
â”œâ”€â”€ å¿«é€Ÿå¼€å§‹.md             # æœ¬æ–‡ä»¶
â””â”€â”€ server/                 # æœåŠ¡å™¨ä»£ç ï¼ˆéƒ¨åˆ†ï¼‰
    â”œâ”€â”€ package.json
    â”œâ”€â”€ .env.example
    â””â”€â”€ src/
        â”œâ”€â”€ app.js
        â””â”€â”€ config/
```

## ğŸ¯ ä¸‰ç§éƒ¨ç½²æ–¹å¼

### æ–¹å¼1ï¼šä¸€é”®è‡ªåŠ¨éƒ¨ç½²ï¼ˆæœ€ç®€å•ï¼‰â­

**é€‚åˆï¼šæƒ³å¿«é€Ÿéƒ¨ç½²ï¼Œä¸æƒ³æ‰‹åŠ¨é…ç½®**

```bash
# 1. ä¸Šä¼ deploy-eagle-chat.shåˆ°æœåŠ¡å™¨
scp deploy-eagle-chat.sh root@your-server:/root/

# 2. SSHç™»å½•æœåŠ¡å™¨
ssh root@your-server

# 3. è¿è¡Œéƒ¨ç½²è„šæœ¬
chmod +x deploy-eagle-chat.sh
sudo ./deploy-eagle-chat.sh

# 4. ç­‰å¾…5-10åˆ†é’Ÿï¼Œè‡ªåŠ¨å®Œæˆæ‰€æœ‰é…ç½®
# è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
#   - å®‰è£…Node.jsã€MongoDBã€PM2
#   - åˆ›å»ºæ‰€æœ‰å¿…è¦æ–‡ä»¶
#   - å®‰è£…ä¾èµ–
#   - é…ç½®Nginx
#   - å¯åŠ¨æœåŠ¡
```

### æ–¹å¼2ï¼šæˆ‘å¸®æ‚¨åˆ›å»ºå®Œæ•´ä»£ç 

**é€‚åˆï¼šæƒ³è¦å®Œæ•´çš„æºä»£ç æ–‡ä»¶**

æˆ‘å¯ä»¥ç»§ç»­åˆ›å»ºæ‰€æœ‰å‰©ä½™çš„æ–‡ä»¶ï¼š
- æ‰€æœ‰æ•°æ®åº“æ¨¡å‹ï¼ˆUser, Message, Groupç­‰ï¼‰
- æ‰€æœ‰APIè·¯ç”±å’Œæ§åˆ¶å™¨
- Socket.IOå®æ—¶é€šä¿¡
- Webå‰ç«¯ï¼ˆReactï¼‰
- å®Œæ•´åŠŸèƒ½å®ç°

**éœ€è¦æˆ‘ç»§ç»­åˆ›å»ºå—ï¼Ÿ**

### æ–¹å¼3ï¼šä½¿ç”¨ç°æˆçš„GitHubä»“åº“

**é€‚åˆï¼šæƒ³ç›´æ¥git cloneä½¿ç”¨**

```bash
# å…‹éš†ä»“åº“ï¼ˆä»“åº“åˆ›å»ºåï¼‰
git clone https://github.com/eagleswaps/eagle-chat.git
cd eagle-chat

# å®‰è£…å’Œå¯åŠ¨
cd server
npm install
cp .env.example .env
nano .env  # ä¿®æ”¹é…ç½®
pm2 start src/app.js --name eagle-chat
```

## ğŸ”§ éƒ¨ç½²åé…ç½®

### 1. é…ç½®DNS

åœ¨Cloudflareæ·»åŠ Aè®°å½•ï¼š
```
chat.eagleswaps.com  â†’  æ‚¨çš„æœåŠ¡å™¨IP
```

### 2. ä¿®æ”¹ç¯å¢ƒå˜é‡

```bash
cd /opt/eagle-chat/server
nano .env
```

é‡è¦é…ç½®é¡¹ï¼š
```env
JWT_SECRET=ä¿®æ”¹ä¸ºéšæœºå¯†é’¥
MONGODB_URI=mongodb://localhost:27017/eagle-chat
JITSI_DOMAIN=meet.eagleswaps.com
```

### 3. é‡å¯æœåŠ¡

```bash
pm2 restart eagle-chat-server
```

## âœ… éªŒè¯éƒ¨ç½²

### æµ‹è¯•API

```bash
# æµ‹è¯•å¥åº·æ£€æŸ¥
curl https://chat.eagleswaps.com/health

# åº”è¯¥è¿”å›ï¼š
{
  "status": "ok",
  "timestamp": "2026-02-03T...",
  "uptime": 123.45
}
```

### æµ‹è¯•Socket.IO

```bash
# åœ¨æµè§ˆå™¨æ§åˆ¶å°æµ‹è¯•
const socket = io('https://chat.eagleswaps.com');
socket.on('connect', () => {
  console.log('Connected!');
});
```

## ğŸ“± é›†æˆåˆ°Androidåº”ç”¨

### 1. æ·»åŠ ä¾èµ–

åœ¨ `app/build.gradle`:
```gradle
dependencies {
    // Socket.IO
    implementation 'io.socket:socket.io-client:2.1.0'
    
    // Retrofit
    implementation 'com.squareup.retrofit2:retrofit:2.9.0'
    implementation 'com.squareup.retrofit2:converter-gson:2.9.0'
}
```

### 2. é…ç½®APIç«¯ç‚¹

```kotlin
object ApiConfig {
    const val CHAT_BASE_URL = "https://chat.eagleswaps.com"
    const val SOCKET_URL = "https://chat.eagleswaps.com"
    const val MEET_URL = "https://meet.eagleswaps.com"
}
```

### 3. å®ç°é’±åŒ…ç™»å½•

```kotlin
// è·å–é’±åŒ…åœ°å€
val address = getCurrentWalletAddress()

// ç­¾åæ¶ˆæ¯
val message = "Login to Eagle Chat"
val signature = signMessage(message)

// å‘é€åˆ°æœåŠ¡å™¨
val response = chatApi.login(LoginRequest(address, signature, message))
val token = response.token

// ä¿å­˜token
SharedPreferences.edit().putString("chat_token", token).apply()
```

## ğŸŒ Webç‰ˆæœ¬è®¿é—®

éƒ¨ç½²å®Œæˆåï¼Œç”¨æˆ·å¯ä»¥ï¼š

1. **æµè§ˆå™¨è®¿é—®**
   ```
   https://chat.eagleswaps.com
   ```

2. **è¿æ¥é’±åŒ…ç™»å½•**
   - ç‚¹å‡»"Connect Wallet"
   - é€‰æ‹©MetaMask/WalletConnect
   - ç­¾åéªŒè¯
   - è‡ªåŠ¨ç™»å½•

3. **å¼€å§‹èŠå¤©**
   - æ·»åŠ å¥½å‹ï¼ˆé€šè¿‡é’±åŒ…åœ°å€ï¼‰
   - åˆ›å»ºç¾¤èŠ
   - å‘èµ·è§†é¢‘ä¼šè®®

## ğŸ¨ ä¸‹ä¸€æ­¥å¼€å‘

### éœ€è¦æˆ‘å¸®æ‚¨åˆ›å»ºçš„æ–‡ä»¶ï¼š

1. **åç«¯æ ¸å¿ƒåŠŸèƒ½**
   - [ ] ç”¨æˆ·æ¨¡å‹å’Œè®¤è¯
   - [ ] æ¶ˆæ¯ç³»ç»Ÿ
   - [ ] ç¾¤èŠç®¡ç†
   - [ ] ä¼šè®®åŠŸèƒ½
   - [ ] Socket.IOå®æ—¶é€šä¿¡

2. **Webå‰ç«¯**
   - [ ] Reactåº”ç”¨æ¡†æ¶
   - [ ] é’±åŒ…ç™»å½•ç•Œé¢
   - [ ] èŠå¤©ç•Œé¢
   - [ ] ç¾¤èŠç®¡ç†
   - [ ] è§†é¢‘ä¼šè®®é›†æˆ

3. **Androidé›†æˆ**
   - [ ] ChatServiceæ›´æ–°
   - [ ] Socket.IOé›†æˆ
   - [ ] è§†é¢‘ä¼šè®®ç•Œé¢

## ğŸ’¡ æ¨èæµç¨‹

### ç¬¬ä¸€é˜¶æ®µï¼šå¿«é€Ÿéƒ¨ç½²ï¼ˆç°åœ¨ï¼‰
```
1. è¿è¡Œdeploy-eagle-chat.sh
2. é…ç½®DNSå’Œç¯å¢ƒå˜é‡
3. éªŒè¯æœåŠ¡è¿è¡Œ
```

### ç¬¬äºŒé˜¶æ®µï¼šå®Œå–„åŠŸèƒ½ï¼ˆæ¥ä¸‹æ¥ï¼‰
```
1. æˆ‘åˆ›å»ºæ‰€æœ‰åç«¯ä»£ç 
2. æˆ‘åˆ›å»ºWebå‰ç«¯
3. æ›´æ–°Androidåº”ç”¨
```

### ç¬¬ä¸‰é˜¶æ®µï¼šæµ‹è¯•ä¸Šçº¿
```
1. åŠŸèƒ½æµ‹è¯•
2. æ€§èƒ½ä¼˜åŒ–
3. æ­£å¼ä¸Šçº¿
```

## â“ å¸¸è§é—®é¢˜

### Q: éƒ¨ç½²è„šæœ¬å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼š
```bash
pm2 logs eagle-chat-server --lines 100
```

### Q: å¦‚ä½•æ›´æ–°ä»£ç ï¼Ÿ
A: 
```bash
cd /opt/eagle-chat/server
git pull  # å¦‚æœä½¿ç”¨git
pm2 restart eagle-chat-server
```

### Q: å¦‚ä½•å¤‡ä»½æ•°æ®ï¼Ÿ
A:
```bash
mongodump --db eagle-chat --out /backup/$(date +%Y%m%d)
```

### Q: å¦‚ä½•æŸ¥çœ‹æ—¥å¿—ï¼Ÿ
A:
```bash
pm2 logs eagle-chat-server
# æˆ–
tail -f /opt/eagle-chat/server/logs/combined.log
```

## ğŸ†˜ éœ€è¦å¸®åŠ©ï¼Ÿ

**ç°åœ¨å‘Šè¯‰æˆ‘æ‚¨æƒ³è¦ï¼š**

### é€‰é¡¹Aï¼šç«‹å³éƒ¨ç½²
- æˆ‘å·²ç»åˆ›å»ºäº†éƒ¨ç½²è„šæœ¬
- æ‚¨å¯ä»¥ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œ
- 5-10åˆ†é’Ÿå®Œæˆéƒ¨ç½²

### é€‰é¡¹Bï¼šå®Œæ•´ä»£ç 
- æˆ‘ç»§ç»­åˆ›å»ºæ‰€æœ‰æ–‡ä»¶
- åŒ…æ‹¬åç«¯ã€å‰ç«¯ã€æ–‡æ¡£
- å®Œæ•´çš„åŠŸèƒ½å®ç°

### é€‰é¡¹Cï¼šåˆ†æ­¥æŒ‡å¯¼
- æˆ‘ä¸€æ­¥æ­¥æŒ‡å¯¼æ‚¨
- æ¯ä¸ªæ­¥éª¤è¯¦ç»†è¯´æ˜
- ç¡®ä¿ç†è§£æ¯ä¸ªéƒ¨åˆ†

**æ‚¨æƒ³é€‰æ‹©å“ªä¸ªï¼Ÿå‘Šè¯‰æˆ‘ï¼Œæˆ‘ç«‹å³å¸®æ‚¨ï¼** ğŸš€
